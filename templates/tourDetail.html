<!--<img style="margin-left:35%;" ng-show="waitForLoad" src="/img/loading-cylon-red.svg" width="256" height="32"
     alt="Loading..."/>-->
<div class="row">
    <div class="col-md-12" id="tourInfoPane">
        <fieldset>
            <div class="row" style="padding: 15px 5px 5px 5px;">
                <div class="col-md-2" ng-switch on="tourInfo.isPlaying">
                    <h2 style="margin-bottom:5px;"><strong ng-mock>{{tourInfo.Game}}</strong><br/>
                        <small><strong>{{tourInfo.Name}}</strong></small>
                    </h2>
                    <h3 ng-switch-when="0">Open <i class="glyphicon glyphicon-off" style="color:green;"></i></h3>

                    <h3 ng-switch-when="1">In Progress <i class="glyphicon glyphicon-off"
                                                          style="color:deepskyblue;"></i></h3>

                    <h3 ng-switch-when="2">Complete <i class="glyphicon glyphicon-off" style="color:red;"></i></h3>
                </div>
                <div class="col-md-10">
                    <div class="row">
                        <div class="col-md-5">
                            <h1>Where?</h1>

                            <p><strong>{{tourney.where}}</strong></p>

                            <h1>When?</h1>

                            <p><strong>{{tourney.when}}</strong></p>
                        </div>
                        <div class="col-md-5">
                            <h1>Prizes!</h1>

                            <div>
                                <ul>
                                    <li ng-repeat="prize in tourney.prizes">{{prize.place}} -- <a
                                            ng-if="prize.href != undefined"
                                            ng-href="{{prize.href}}">{{prize.title}}</a> <span
                                            ng-if="prize.href == undefined">{{prize.title}}</span></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-2 tourActions">
                            <button type="button" ng-show="foundPlayer == undefined"
                                    class="btn btn-sm btn-info pull-right" id="registerPlayer"
                                    ng-click="tryRegisterPlayer()" style="margin-left:20px;">Register As Player
                            </button>
                            <button type="button" ng-show="foundPlayer !== undefined"
                                    class="btn btn-sm btn-danger pull-right" id="leavePlayer"
                                    ng-click="tryLeavePlayer(foundPlayer)" style="margin-left:20px;">Leave As Player
                            </button>
                            <button type="button" ng-show="foundTeam !== undefined"
                                    class="btn btn-sm btn-danger pull-right" ng-click="tryLeaveTeam(foundTeam)"
                                    id="leaveTeam">Leave As Team
                            </button>
                            <button type="button" ng-show="foundTeam == undefined"
                                    class="btn btn-sm btn-info pull-right" id="registerTeam">Register As Team
                            </button>
                            <select ng-show="showTeams" class="form-control pull-right" ng-model="selectedTeam"
                                    id="selectedTeam"
                                    ng-options="g.name for g in yourTeams" ng-change="update()"></select>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
    </div>
    <div class="col-md-6" id="teamPane">
        <fieldset>
            <legend>Team Roster</legend>
            <ul class="list-unstyled">
                <li ng-repeat="team in tourTeams" class="lead">
                    <a ui-sref="team({teamId:team.ID})">{{team.name}}</a>
                    <button type="button" ng-if="admin" ng-click="tryLeaveTeam(team.ID)"
                            class="btn btn-sm btn-danger pull-right" style="margin-left:25px;">Remove
                    </button>
                    <button type="button" ng-if="admin && !team.isPresent" ng-click="makeTeamPresent(team.ID)"
                            id="presentTeam{{team.ID}}" class="btn btn-sm btn-success pull-right">Present
                    </button>
                    <p ng-if="team.isPresent" class="pull-right" style="color:green;">Present</p>
                </li>
            </ul>
            <p class="lead" ng-if="tourTeams.length == 0">No Teams currently competing!</p>
        </fieldset>
    </div>
    <div class="col-md-6" id="playerPane">
        <fieldset>
            <legend>Player Roster</legend>
            <ul class="list-unstyled">
                <li ng-repeat="player in tourUsers" class="lead">
                    <a ui-sref="user({userId:player.id})">{{player.alias}}</a> <a ui-sref="team({teamId:team.ID})">{{team.name}}</a>
                    <button type="button" ng-if="admin" ng-click="tryLeavePlayer(player.id)"
                            class="btn btn-sm btn-danger pull-right" style="margin-left:25px;">Remove
                    </button>
                    <button type="button" ng-if="admin && !player.isPresent" ng-click="makePlayerPresent(player.id)"
                            id="presentPlayer{{player.id}}" class="btn btn-sm btn-success pull-right">Present
                    </button>
                    <p ng-if="player.isPresent" class="pull-right" style="color:green;">Present</p>
                </li>
            </ul>
            <p class="lead" ng-if="tourUsers.length == 0">No Players currently competing!</p>
        </fieldset>
    </div>
</div>
<div class="row">
    <div class="col-md-12"></div>
</div>
<div class="row">
    <div class="col-md-12">
        <fieldset>
            <legend>Rules</legend>
            <ul>
                <li ng-repeat="rule in tourney.rules track by $index" ng-bind-html="rule"></li>
            </ul>
        </fieldset>
    </div>
    <div ng-if="tourney.maps != undefined" class="col-md-12">
        <fieldset>
            <legend>Maps</legend>
            <ul>
                <li ng-repeat="map in tourney.maps"><a ng-if="map.href != undefined"
                                                       ng-href="{{map.href}}">{{map.title}}</a>
                    <span ng-if="map.href == undefined">{{map.title}}</span></li>
            </ul>
        </fieldset>
    </div>
</div>