<div class="row">
    <div class="col-md-12" id="tourInfoPane">
        <fieldset>
            <div class="row" style="padding: 15px 5px 5px 5px;">
                <div class="col-md-2" ng-switch on="tourInfo.isPlaying">
                    <h2 style="margin-bottom:5px;"><strong ng-mock>{{tourInfo.Game}}</strong><br/>
                        <small><strong>{{tourInfo.Name}}</strong></small>
                    </h2>
                    <a ng-show="admin" editable-select="tourInfo.isPlaying" e-ng-options="s.value as s.text for s in tourStatus"
                       onbeforesave="setTourStatus($data)">
                        <h3>{{ showStatus() }}
                            <i ng-switch-when="0" class="glyphicon glyphicon-off" style="color:green;"></i>
                            <i ng-switch-when="1" class="glyphicon glyphicon-off" style="color:darkorange;"></i>
                            <i ng-switch-when="2" class="glyphicon glyphicon-off" style="color:deepskyblue;"></i>
                            <i ng-switch-when="3" class="glyphicon glyphicon-off" style="color:red;"></i></h3>
                    </a>
                    <h3 ng-hide="admin">{{tourStatus[tourInfo.isPlaying].text}}
                        <i ng-switch-when="0" class="glyphicon glyphicon-off" style="color:green;"></i>
                        <i ng-switch-when="1" class="glyphicon glyphicon-off" style="color:darkorange;"></i>
                        <i ng-switch-when="2" class="glyphicon glyphicon-off" style="color:deepskyblue;"></i>
                        <i ng-switch-when="3" class="glyphicon glyphicon-off" style="color:red;"></i>
                    </h3>
                </div>
                <div class="col-md-10">
                    <div class="row">
                        <div class="col-md-5">
                            <h1>Where?</h1>

                            <p><strong>{{tourney.where}}</strong></p>

                            <h1>When?</h1>

                            <p><strong>{{tourney.when}}</strong></p>
                        </div>
                        <div class="col-md-5">
                            <h1>Prizes!</h1>

                            <div>
                                <ul>
                                    <li ng-repeat="prize in tourney.prizes">{{prize.place}} -- <a
                                            ng-if="prize.href != undefined"
                                            ng-href="{{prize.href}}">{{prize.title}}</a> <span
                                            ng-if="prize.href == undefined">{{prize.title}}</span></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-2 tourActions" ng-show="openRosters && userService.isLoggedIn()">
                            <button type="button" ng-show="(foundPlayer == undefined) && (tourInfo.isTeamOnly && foundTeam == undefined)"
                                    class="btn btn-sm btn-info pull-right" id="registerPlayer"
                                    ng-click="tryRegisterPlayer()" style="margin-left:20px;">{{tourInfo.isTeamOnly ? 'Join Waiting List as Player' : 'Register As Player'}}
                            </button>
                            <button type="button" ng-show="foundPlayer !== undefined"
                                    class="btn btn-sm btn-danger pull-right" id="leavePlayer"
                                    ng-click="tryLeavePlayer(foundPlayer)" style="margin-left:20px;">{{tourInfo.isTeamOnly ? 'Leave Waiting List' : 'Leave As Player'}}
                            </button>
                            <button type="button" ng-show="foundTeam !== undefined && tourInfo.isTeamOnly"
                                    class="btn btn-sm btn-danger pull-right" ng-click="tryLeaveTeam(foundTeam)"
                                    id="leaveTeam">Leave As Team
                            </button>
                            <button type="button" ng-show="foundTeam == undefined && tourInfo.isTeamOnly"
                                    class="btn btn-sm btn-info pull-right" ng-click="open()" id="registerTeam">Register As Team
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
    </div>
    <div class="col-md-12" ng-show="admin">
        <fieldset>
            <legend>Admin Area</legend>
            <div class="form-group">
                <label class="control-label">Players Per Team:</label>
                <a editable-select="tourInfo.minTeamMembers" e-ng-options="s.value as s.text for s in numPlayers"
                   onbeforesave="setPlayers($data)">
                    {{ showPlayers() }}
                </a>
            </div>
            <div class="form-group">
                <label class="control-label">Allowed Entrant Type:</label>
                <a editable-select="tourInfo.isTeamOnly" e-ng-options="s.value as s.text for s in entrants"
                   onbeforesave="setEntrantType($data)">
                    {{ showEntrants() }}
                </a>
            </div>
        </fieldset>
    </div>
    <div class="col-md-6" id="teamPane" ng-show="tourInfo.isTeamOnly && userService.isLoggedIn()">
        <fieldset>
            <legend>Team Roster</legend>
            <ul class="list-unstyled">
                <li ng-repeat="team in tourTeams" class="lead">
                    <a ui-sref="team({teamId:team.ID})">{{team.name}}</a>
                    <button type="button" ng-if="admin" ng-click="tryLeaveTeam(team.ID)"
                            class="btn btn-sm btn-danger pull-right" style="margin-left:25px;">Remove
                    </button>
                    <button type="button" ng-if="admin && team.isPresent == 0" ng-click="makeTeamPresent(team.ID)"
                            id="presentTeam{{team.ID}}" class="btn btn-sm btn-success pull-right">Present
                    </button>
                    <p ng-if="team.isPresent == 1" class="pull-right" style="color:green;">Present</p>
                </li>
            </ul>
            <p class="lead" ng-if="tourTeams.length == 0">No Teams currently competing!</p>
        </fieldset>
    </div>
    <div id="playerPane" ng-show="userService.isLoggedIn()" ng-class="{'col-md-6': tourInfo.isTeamOnly, 'co-md-12': !tourInfo.isTeamOnly}">
        <fieldset>
            <legend ng-if="!tourInfo.isTeamOnly">Player Roster</legend>
            <legend ng-if="tourInfo.isTeamOnly">Waiting List</legend>
            <ul class="list-unstyled">
                <li ng-repeat="player in tourUsers" class="lead">
                    <a ui-sref="user({userId:player.id})">{{player.alias}}</a>
                    <button type="button" ng-if="admin" ng-click="tryLeavePlayer(player.id)"
                            class="btn btn-sm btn-danger pull-right" style="margin-left:25px;">Remove
                    </button>
                    <button type="button" ng-if="admin && player.isPresent == 0" ng-click="makePlayerPresent(player.id)"
                            id="presentPlayer{{player.id}}" class="btn btn-sm btn-success pull-right">Present
                    </button>
                    <button ng-show="tourInfo.isTeamOnly && player.id != userService.getProfile().id && foundTeam == undefined && openRosters" type="button" ng-click="addPlayerToTeam(player.id)" class="btn btn-sm btn-info pull-right">Add To Team</button>
                    <p ng-if="player.isPresent == 1" class="pull-right" style="color:green;">Present</p>
                </li>
            </ul>
            <p class="lead" ng-if="tourUsers.length == 0 && !tourInfo.isTeamOnly">No Players currently competing!</p>
            <p class="lead" ng-if="tourUsers.length == 0 && tourInfo.isTeamOnly">No players currently seeking a team.</p>
        </fieldset>
    </div>
</div>
<div class="row">
    <div class="col-md-12"></div>
</div>
<div class="row">
    <div class="col-md-12">
        <fieldset>
            <legend>Rules</legend>
            <ul>
                <li ng-repeat="rule in tourney.rules track by $index" ng-bind-html="rule"></li>
            </ul>
        </fieldset>
    </div>
    <div ng-if="tourney.maps != undefined" class="col-md-12">
        <fieldset>
            <legend>Maps</legend>
            <ul>
                <li ng-repeat="map in tourney.maps"><a ng-if="map.href != undefined"
                                                       ng-href="{{map.href}}">{{map.title}}</a>
                    <span ng-if="map.href == undefined">{{map.title}}</span></li>
            </ul>
        </fieldset>
    </div>
</div>
<script type="text/ng-template" id="teamRegister.html">
    <div class="modal-header">
        <h3>Choose A Team</h3>
    </div>
    <div class="modal-body">
        <div class="row" ng-show="!loading">
            <img style="margin-left:35%;" ng-show="loading" src="/img/loading-cylon-red.svg" width="256" height="32"
                 alt="Loading..."/>
            <div ng-repeat="team in modifiedTeams" class="col-md-6">
                <a class="thumbnail" ng-class="{active: $parent.selectedTeam == team, orange: $parent.selectedTeam == team, disabled: !team.valid}" ng-click="$parent.selectTeam(team)">
                    <div class="caption">
                        <address>{{team.name}}<br/>
                        Members: {{team.members.length}}</address>
                        <p class="text-danger" ng-if="!team.valid">Members on this team exist on another team already registered!</p>
                        <p class="text-danger" ng-if="!team.numberValid">This team does not have enough members to compete! Must have <strong>{{minimum}}</strong> members.</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-class="{disabled: selectedTeam == null}" ng-click="register()">Register</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>
<script type="text/ng-template" id="teamJoin.html">
    <div class="modal-header">
        <h3>Choose A Team</h3>
    </div>
    <div class="modal-body">
        <div class="row" ng-show="!loading">
            <img style="margin-left:35%;" ng-show="loading" src="/img/loading-cylon-red.svg" width="256" height="32"
                 alt="Loading..."/>
            <div ng-repeat="team in modifiedTeams" class="col-md-6">
                <a class="thumbnail" ng-class="{active: $parent.selectedTeam == team, orange: $parent.selectedTeam == team, disabled: !team.valid}" ng-click="$parent.selectTeam(team)">
                    <div class="caption">
                        <address>{{team.name}}<br/>
                            Members: {{team.members.length}}</address>
                        <p class="text-danger" ng-if="!team.valid">Team is full!</p>
                        <p class="text-danger" ng-if="team.duplicateUser">User is already on this team!</p>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-class="{disabled: selectedTeam == null}" ng-click="addToTeam()">Add To Team</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>

<!-- <button class="btn btn-default" ng-click="open()">Open me!</button>-->