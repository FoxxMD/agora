<div class="row profileContainer">
    <div class="col-md-12" style="margin-bottom:50px;">
        <div ng-switch="profileCtrl.isEditable()">
            <h1 ng-switch-when="true"><a editable-text="profileCtrl.user.globalHandle" onaftersave="profileCtrl.tryUpdateHandle($data)">{{profileCtrl.user.globalHandle}}</a></h1>

            <h1 ng-switch-default>{{profileCtrl.user.globalHandle}}</h1>
        </div>
    </div>
    <div ng-if="profileCtrl.isAdmin()" class="col-md-12">
        <div class="well">
            <h3>Admin Panel</h3>

            <div class="row">
                <div ng-if="profileCtrl.account.isAdmin()" ng-class="profileCtrl.isEventProfile() ? 'col-md-6' : 'col-md-12'">
                    <div class="well">
                        <h4>Global Admin Options (Not Implemented)</h4>
                        <button class="btn btn-warning">Reset Password</button>
                        <button class="btn btn-info">Make Global Admin</button>
                        <div class="alert alert-danger">
                            <h4>Dangaaa Zoooone</h4>
                            <button class="btn btn-danger">Delete Account</button>
                        </div>
                    </div>
                </div>
                <div ng-if="profileCtrl.isEventProfile()" ng-class="{'col-md-6':profileCtrl.account.isAdmin(),'col-md-12':profileCtrl.user.accountType == 'A'}">
                    <div class="well">
                        <h4>Event {{profileCtrl.user.events[profileCtrl.eventIndex].isAdmin ? 'Admin' : 'Moderator'}} Options</h4>
                        <div class="row">
                            <div class="col-md-6 col-sm-6 col-xs-6">
                                <button ladda="profileCtrl.paidLoading" data-style="expand-right" ng-click="profileCtrl.tryChangePaid()" ng-class="profileCtrl.user.events[profileCtrl.eventIndex].hasPaid ? 'btn-success' : 'btn-danger'" class="btn">{{profileCtrl.user.events[profileCtrl.eventIndex].hasPaid ? 'Has Paid' : 'Has Not Paid'}}</button>
                                <button ladda="profileCtrl.presentLoading" data-style="expand-right" ng-click="profileCtrl.tryChangePresent()" ng-class="profileCtrl.user.events[profileCtrl.eventIndex].isPresent ? 'btn-success' : 'btn-danger'" class="btn">{{profileCtrl.user.events[profileCtrl.eventIndex].isPresent ? 'Is Present' : 'Is Not Present'}}</button>
                            </div>
                            <div ng-if="profileCtrl.user.events[profileCtrl.eventIndex].isAdmin" class="col-md-6 col-sm-6 col-xs-6">
                                <button ladda="profileCtrl.modLoading" data-style="expand-right" ng-click="profileCtrl.tryChangeModerator()" ng-class="profileCtrl.user.events[profileCtrl.eventIndex].isModerator ? 'btn-warning' : 'btn-info'" class="btn">{{profileCtrl.user.events[profileCtrl.eventIndex].isModerator ? 'Remove Mod' : 'Make Mod'}}</button>
                                <button ladda="profileCtrl.eventAdminLoading" data-style="expand-right" ng-click="profileCtrl.tryChangeEventAdmin()" ng-class="profileCtrl.user.events[profileCtrl.eventIndex].isAdmin ? 'btn-warning' : 'btn-info'" class="btn">{{profileCtrl.user.events[profileCtrl.eventIndex].isAdmin ? 'Remove Admin' : 'Make Admin'}}</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="alert alert-danger">
                                    <h4>Dangaaa Zoooone</h4>
                                    <button ng-click="profileCtrl.tryRemoveUser()" class="btn btn-danger">Remove User From Event</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <div class="well">
                    <h3>Statistics</h3>
                    <ul>
                        <li>Joined: {{profileCtrl.user.cDate}}</li>
                    </ul>
                </div>
            </div>
            <div class="col-md-12">
                <div class="well">
                    <h4>Teams</h4>
                    <accordion close-other="profileCtrl.openedTeamsAccordion">
                        <accordion-group heading="{{team.Team.name}}" ng-repeat="team in profileCtrl.user.teams">
                            Got yer Team, {{team.Team.name}}, with the Id {{team.Team.id}} right here.
                        </accordion-group>
                    </accordion>
                    {{profileCtrl.user.teams.length == 0 ? 'None to report!' : ''}}
                </div>
            </div>
            <div class="col-md-12">
                <div class="well">
                    <h4>Your Game Profiles</h4>
                    <accordion close-other="profileCtrl.openedGameProfileAccordion">
                        <accordion-group heading="{{profile.platform}}" ng-repeat="profile in profileCtrl.user.gameProfiles">
                            <a ng-if="profileCtrl.isEditable()" editable-text="profile.identifier" onaftersave="profileCtrl.tryUpdateGameProfile(profile)">{{profile.identifier}}</a>
                            {{!profileCtrl.isEditable() ? profile.identifier : ''}}
                             <button ng-click="profileCtrl.tryRemoveGameProfile(profile)" class="btn btn-sm btn-danger pull-right">Remove</button>
                        </accordion-group>
                    </accordion>
                    {{profileCtrl.users.gameProfiles.length == 0 ? 'No Profiles Added!': ''}}
                    <morphing-button ng-if="profileCtrl.isEditable()" title="Add New Profile">
                        <form class="form morphingButtonForm" name="createProfileForm" ng-submit="profileCtrl.tryCreateGameProfile()"
                              novalidate>
                            <div class="row">
                                <div class="col-md-6 col-sm-6 col-xs-6">
                                    <div class="form-group">
                                        <h4>Choose A Platform</h4>
                                        <div class="btn-group">
                                            <!--TODO make these disappear if user already has one -->
                                            <label class="btn btn-info" ng-model="profileCtrl.newPlatformData.platform" btn-radio="'Steam'">Steam</label>
                                            <label class="btn btn-info" ng-model="profileCtrl.newPlatformData.platform" btn-radio="'Battle.net'">Battle.net</label>
                                            <label class="btn btn-info" ng-model="profileCtrl.newPlatformData.platform" btn-radio="'Riot'">Riot</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-6">
                                    <h4>Specify your handle</h4>
                                    <div class="form-group" show-errors>
                                        <input type="text" class="form-control" ng-model="profileCtrl.newPlatformData.identifier" name="platformHandle" placeholder="Handle" required/>
                                        <p class="help-block" ng-show="createProfileForm.platformHandle.$error.required">Required</p>
                                    </div>
                                </div>
                            </div>
                            <button ladda="gameProfileLoading" data-style="expand-right" type="submit" class="btn btn-primary pull-right">Add</button>
                        </form>
                    </morphing-button>
                </div>
            </div>
        </div>
    </div>
    <div ng-if="profileCtrl.isEventProfile()" class="col-md-6">
        <div class="well">
            <h3>At This Event</h3>
            <ul>
                <li>Account Type: {{profileCtrl.user.accountType == 'A' ? 'Admin' : profileCtrl.user.accountType == 'M' ? 'Moderator' : 'User'}}</li>
            </ul>
            <h4>Tournaments</h4>
            <accordion>
                <accordion-group heading="1v1 Rust Me Bro">
                    <div class="row">
                        <div class="col-md-6">
                            <strong>Stats</strong>
                            <ul class="list-unstyled">
                                <li>Participating with <strong>Team Honkey</strong></li>
                                <li><strong>Starts</strong> in two days at 11:45am</li>
                                <li><strong>5 other teams are participating</strong></li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <strong>Info</strong>
                            <ul>
                                <li><strong>Game:</strong> League of Legends</li>
                                <li><strong>Type:</strong> Round-Robin</li>
                                <li><strong>Roster Status:</strong> Open!</li>
                            </ul>
                        </div>
                    </div>
                </accordion-group>
            </accordion>
        </div>
    </div>
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12">
                <div class="well">
                    <h4>Events Participated In</h4>
                    <accordion close-other="profileCtrl.openedEventAccordion">
                        <accordion-group heading="{{pEvent.name}}" ng-repeat="pEvent in profileCtrl.user.events">
                            Got yer Event, {{pEvent.name}}, with the Id {{pEvent.id}} right here.
                        </accordion-group>
                    </accordion>
                    {{profileCtrl.user.events.length == 0 ? 'None to report!' :''}}
                </div>
            </div>
            <div class="col-md-12">
                <div class="well">
                    <h4>Tournaments Participated In</h4>
                    <accordion close-other="profileCtrl.openedTournamentAccordion">
                        <accordion-group heading="{{tour.name}}" ng-repeat="tour in profileCtrl.user.tournaments">
                            Got yer Tournament, {{tour.name}}, with the Id {{tour.id}} right here.
                        </accordion-group>
                    </accordion>
                    {{profileCtrl.user.tournaments == undefined ? 'None to report!' : ''}} <!--TODO make this .length == 0 once tournaments are included -->
                </div>
            </div>
        </div>
    </div>
</div>