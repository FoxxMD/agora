<div class="row well">
    <div class="col-md-offset-2 col-md-4 well">
        <h4>Filter By Name</h4>
        <tags-input ng-model="usersCtrl.userNameTags">
        </tags-input>
    </div>
    <div class="col-md-4 well">
        <h4>Filter By Platform</h4>
        <tags-input ng-model="usersCtrl.userPlatformTags">
            <auto-complete source="usersCtrl.loadPlatforms($query)"></auto-complete>
        </tags-input>
    </div>
</div>
<infinite-scroller-animated>
    <ul class="grid effect-6" masonry="{transitionDuration: 0}" id="grid" load-images="false" column-width=".grid-sizer" infinite-scroll="usersCtrl.getMoreUsers()"
        infinite-scroll-container="'#st-content'" infinite-scroll-disabled="usersCtrl.busy">
        <div class="grid-sizer"></div>
        <li class="masonry-brick outline-outward eventCard" ng-repeat="user in usersCtrl.userCollection | filter: usersCtrl.filterUsers track by $index" on-last-repeat>
            <div style="position:relative;width:100%; height:100%;">
                <div ng-if="usersCtrl.isEvent && usersCtrl.isAdmin()" style="position:absolute; top:0; right:0">
                    <button ladda="user.presentLoading" data-style="expand-right" class="btn btn-sm" ng-click="usersCtrl.tryChangePresent(user)"
                            ng-class="user.isPresent ? 'btn-success': 'btn-danger'">{{user.isPresent ? 'Is Present' : 'Not Present'}}
                    </button>
                    <!--{{usersCtrl.isAdmin() ? '' : user.isPresent ? 'Yes' : 'No'}}-->
                    <button ladda="user.paidLoading" data-style="expand-right" class="btn btn-sm" ng-click="usersCtrl.tryChangePaid(user)"
                            ng-class="user.hasPaid ? 'btn-success' : 'btn-danger'">{{user.hasPaid ? 'Has Paid' : 'Not Paid'}}
                    </button>
                </div>
                <div style="position:absolute;top:0;bottom:0;right:0;left:0;"
                     ng-click="usersCtrl.isGlobal ? usersCtrl.state.go('globalSkeleton.profile',{userId:user.id}) : usersCtrl.state.go('eventSkeleton.profile',{eventId:usersCtrl.stateParams.eventId, userId:user.id})">
                    <h3>{{user.globalHandle}}</h3>
                    <p>Joined {{user.createdDate.format("M[/]D[/]YYYY")}}</p>
                    <div style="position:absolute; bottom:0">
                        <h4>{{user.guilds.length}} Guilds</h4>
                        <h4>{{user.platforms.length}} platforms</h4>
                    </div>
                </div>
            </div>
        </li>
    </ul>
</infinite-scroller-animated>